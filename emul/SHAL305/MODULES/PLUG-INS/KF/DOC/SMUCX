= Реально на реальном! (2:5030/827.2) =========================== REAL.SPECCY =
 Msg  : 1013 of 1013 -1006
 From : Ilya Vinogradov                     2:5054/37.26                        15 Aug 01  16:04:02
 To   : Fyodor Odegov                                                           16 Aug 01  00:07:24
 Subj : CD-WALK: Announce.
===============================================================================
   Вижу тебя как наяву, Fyodor!

 IV>> 3.9f, 4.00, 4.01, G5.00 - четыре штуки (еще, говорят,
 IV>> 3.9e у кого-то работала),
FO>   В доке по GMX еще упоминается версия G4.03:) Правда,
FO> очень сомневаюсь, что у кого-нибудь она еще осталась...

      Если владелец предоставит адреса - поддержать не составит труда.

      JTN/4D откопал официальную информацию, о том, с какой версии ПрофПЗУ идет
поддержка SMUC/HDD - Она была в каком-то из древних номеров ZxNews (20ом или 
24ом), Там еденицами по нулям написано, что это версия:

          *** ПрофПЗУ 3.9e!!! Код версии: #5d!!! ***

Код содержится по смещению #f1 в ПЗУ монитора (да-да там содежится _код_ версии
ПЗУ а не год ;)

IV>> без участия монитора, и опять банку сохранить, а потом
IV>> сопоставить то что получилось...

FO>   Угумс, помогло:) С адреса #FFCC в восьмой банке находится
FO> табличка из четырех байтов. Каждый соответствует своему
FO> дисководу: #E0 - виртуальный, #C0 - физический.
FO> Естественно, этот адрес только в G5.00,

    He-he ;) Самый прикол что, похоже этот адрес стандартный и от версии 
ПрофПЗУ не зависит! ;))) У меня на 3.9f - он такой же, то есть #FFCC!!!

    Подведем итоги: получается, что на _любой_ версии ПрофПЗУ с поддержкой 
SMUC/HDD, можно выполнить следующее:

    - подключить/отключить раздел в секторе эмуляций,
    - записать информацию о том реальный или виртуальный Drive        в порт 
#7fba. (7ой-6ой биты)
    - записать информацию об этом же в переменые по адресу        #ffcc.

    Yahoo! Этого уже достаточно для нормальной/беззаботной работы!!!

    Однако если мы знаем еще и адреса описателей областей TrDos/R8-Dos в ram8, 
то мы можем еще и "визуально" подключить любой образ: то есть при входе в 
монитор, в меню "Hard Disk Utility" можно будет наблюдать имя текущего 
подключенного раздела, которое раньше появлялось только после принудительного 
считывания сектора эмуляций при ручном подключении другого подраздела из 
монитора.

    Сейчас известны адреса в следующих версиях ПрофПЗУ:

    3.9e (#5d) - no 
 +  3.9f (#5e) - #e9f3
    4.00 (#5f) - no 
    4.01 (#60) - no 

   G4.03 (#??) - no 
 + G5.00 (#??) - #ea14

    2ПрофПЗУ users с винтами: Опубликуйте адреса в ваших версиях!!! (И код 
версии ПрофПЗУ).

FO> но найти его в других версиях, думаю труда не составит:-)

    уже нашли ;)))

FO> Теперь все работает на ура.

    Yahooo!!! Кааалбаса ;)

FO> С уважением Fyodor Odegov aka FION.

   Fyodor, не скучай! WbW, .i╙i░/4D.

--- ░a╙a (╙o╔╓ 4.50 -=- [I.ZX] [GoA] [H╙╓ + S╙s] -=-
 * Origin: Уральский горец Мак'Сфрай. (2:5054/37.26)

